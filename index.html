<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Experimental calendar search</title>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width,initial-scale=1,shrink-to-fit=no"
    />
    <meta
      name="description"
      content="Search for years in which a given date in the Islamic calendar fell on a given weekday"
    />
    <meta content="Theo Beers" name="author" />
    <link rel="icon" href="#" />
    <link rel="stylesheet" href="css/bootstrap.min.css" />
    <style>
      h1 {
        font-size: 210%;
      }
      h5 {
        font-size: 115%;
      }
      p {
        hyphens: auto;
      }
    </style>
  </head>
  <body>
    <div class="container" style="margin-top: 0.6rem">
      <h1>Experimental calendar search</h1>
      <div style="display: none">
        <form
          action="JavaScript:calcGregorian();"
          id="gregorian"
          name="gregorian"
        >
          <table
            class="table table-bordered table-sm"
            style="max-width: 36rem; text-align: center"
          >
            <tr>
              <td>
                <input
                  aria-label="Gregorian year"
                  id="greg-year"
                  name="year"
                  style="width: 5.5em"
                  type="number"
                  value="1998"
                />
                <select
                  aria-label="Gregorian month"
                  name="month"
                  style="width: 8em"
                >
                  <option value="1">January</option>
                  <option value="2">February</option>
                  <option value="3">March</option>
                  <option value="4">April</option>
                  <option value="5">May</option>
                  <option value="6">June</option>
                  <option value="7">July</option>
                  <option value="8">August</option>
                  <option value="9">September</option>
                  <option value="10">October</option>
                  <option value="11">November</option>
                  <option value="12">December</option>
                </select>
                <input
                  aria-label="Gregorian day"
                  id="greg-day"
                  max="31"
                  min="1"
                  name="day"
                  style="width: 4.25em"
                  type="number"
                  value="1"
                /><br /><input
                  aria-label="Normal or leap year"
                  name="leap"
                  readonly="readonly"
                  style="margin-top: 0.25em; color: #228b22; width: 9.1em"
                  type="text"
                  value=""
                />
                <input
                  aria-label="Weekday"
                  name="wday"
                  readonly="readonly"
                  style="color: #228b22; width: 9em"
                  type="text"
                  value=""
                />
              </td>
            </tr>
            <tr>
              <td>
                <input
                  class="btn btn-primary"
                  id="greg-calc-btn"
                  onclick="calcGregorian();"
                  type="submit"
                  value="Calculate"
                />
                &ensp;
                <input
                  class="btn btn-secondary"
                  id="greg-today-btn"
                  onclick="setDateToToday();calcGregorian();"
                  type="button"
                  value="Today"
                />
              </td>
            </tr>
          </table>
        </form>
        <form
          action="JavaScript:calcJulianCalendar();"
          id="juliancalendar"
          name="juliancalendar"
        >
          <table
            class="table table-bordered table-sm"
            style="max-width: 36rem; text-align: center"
          >
            <tr>
              <td>
                <input
                  aria-label="Julian year"
                  id="julian-year"
                  name="year"
                  style="width: 5.5em"
                  type="number"
                  value=""
                />
                <select
                  aria-label="Julian month"
                  name="month"
                  style="width: 8em"
                >
                  <option value="1">January</option>
                  <option value="2">February</option>
                  <option value="3">March</option>
                  <option value="4">April</option>
                  <option value="5">May</option>
                  <option value="6">June</option>
                  <option value="7">July</option>
                  <option value="8">August</option>
                  <option value="9">September</option>
                  <option value="10">October</option>
                  <option value="11">November</option>
                  <option value="12">December</option>
                </select>
                <input
                  aria-label="Julian day"
                  id="julian-cal-day"
                  max="31"
                  min="1"
                  name="day"
                  style="width: 4.25em"
                  type="number"
                  value=""
                /><br /><input
                  aria-label="Normal or leap year"
                  name="leap"
                  readonly="readonly"
                  style="margin-top: 0.25em; color: #228b22; width: 9.1em"
                  type="text"
                  value=""
                />
                <input
                  aria-label="Weekday"
                  name="wday"
                  readonly="readonly"
                  style="color: #228b22; width: 9em"
                  type="text"
                  value=""
                />
              </td>
            </tr>
            <tr>
              <td>
                <input
                  class="btn btn-primary"
                  id="julian-btn"
                  onclick="calcJulianCalendar();"
                  type="submit"
                  value="Calculate"
                />
              </td>
            </tr>
          </table>
        </form>
        <form action="JavaScript:calcHebrew();" id="hebrew" name="hebrew">
          <table
            class="table table-bordered table-sm"
            style="max-width: 36rem; text-align: center"
          >
            <tr>
              <td>
                <input
                  aria-label="Hebrew year"
                  name="year"
                  id="heb-year"
                  type="number"
                  value=""
                  style="width: 5.5em"
                />
                <select
                  name="month"
                  aria-label="Hebrew month"
                  style="width: 8em"
                >
                  <option label="Nisan" value="1"></option>
                  <option label="Iyar" value="2"></option>
                  <option label="Sivan" value="3"></option>
                  <option label="Tammuz" value="4"></option>
                  <option label="Av" value="5"></option>
                  <option label="Elul" value="6"></option>
                  <option label="Tishrei" value="7"></option>
                  <option label="Cheshvan" value="8"></option>
                  <option label="Kislev" value="9"></option>
                  <option label="Tevet" value="10"></option>
                  <option label="Shevat" value="11"></option>
                  <option label="Adar" value="12"></option>
                  <option label="Veadar" value="13"></option>
                </select>
                <input
                  aria-label="Hebrew day"
                  name="day"
                  max="30"
                  min="1"
                  type="number"
                  value=""
                  style="width: 4.25em"
                /><br /><input
                  aria-label="Type of year"
                  name="leap"
                  readonly="readonly"
                  type="text"
                  value=""
                  style="margin-top: 0.25em; color: #228b22; width: 18.3em"
                />
              </td>
            </tr>
            <tr>
              <td>
                <input
                  onclick="calcHebrew();"
                  value="Calculate"
                  class="btn btn-primary"
                  type="submit"
                  id="hebrew-btn"
                />
              </td>
            </tr>
          </table>
        </form>
        <div class="card border-info mb-3" style="max-width: 36rem">
          <div class="card-body text-info">
            <p class="card-text" id="seleucid-answer">
              In the Seleucid era, as used by some medieval Jewish communities,
              this is year …
            </p>
          </div>
        </div>
        <form action="JavaScript:calcIslamic();" id="islamic" name="islamic">
          <table
            class="table table-bordered table-sm"
            style="max-width: 36rem; text-align: center"
          >
            <tr>
              <td>
                <input
                  aria-label="Islamic year"
                  id="islamic-year"
                  name="year"
                  style="width: 5.5em"
                  type="number"
                  value=""
                />
                <select
                  aria-label="Islamic month"
                  name="month"
                  style="width: 9.5em"
                >
                  <option value="1">Muharram</option>
                  <option value="2">Safar</option>
                  <option value="3">Rabi‘ I</option>
                  <option value="4">Rabi‘ II</option>
                  <option value="5">Jumada I</option>
                  <option value="6">Jumada II</option>
                  <option value="7">Rajab</option>
                  <option value="8">Sha‘ban</option>
                  <option value="9">Ramadan</option>
                  <option value="10">Shawwal</option>
                  <option value="11">Dhu al-Qa‘dah</option>
                  <option value="12">Dhu al-Hijjah</option>
                </select>
                <input
                  aria-label="Islamic day"
                  id="islamic-day"
                  max="30"
                  min="1"
                  name="day"
                  style="width: 4.25em"
                  type="number"
                  value=""
                /><br /><input
                  aria-label="Normal or leap year"
                  name="leap"
                  readonly="readonly"
                  style="margin-top: 0.25em; color: #228b22; width: 8.8em"
                  type="text"
                  value=""
                />
                <input
                  aria-label="Arabic weekday"
                  name="wday"
                  readonly="readonly"
                  style="color: #228b22; width: 10.8em"
                  type="text"
                  value=""
                />
              </td>
            </tr>
            <tr>
              <td>
                <input
                  class="btn btn-primary"
                  id="islamic-btn"
                  onclick="calcIslamic();"
                  type="submit"
                  value="Calculate"
                />
              </td>
            </tr>
          </table>
        </form>
        <form action="JavaScript:calcPersiana();" id="persiana" name="persiana">
          <table
            class="table table-bordered table-sm"
            style="max-width: 36rem; text-align: center"
          >
            <tr>
              <td>
                <input
                  aria-label="Persian year"
                  id="pers-year"
                  name="year"
                  style="width: 5.5em"
                  type="number"
                  value=""
                />
                <select
                  aria-label="Persian month"
                  name="month"
                  style="width: 9em"
                >
                  <option value="1">Farvardin</option>
                  <option value="2">Ordibehesht</option>
                  <option value="3">Khordad</option>
                  <option value="4">Tir</option>
                  <option value="5">Mordad</option>
                  <option value="6">Shahrivar</option>
                  <option value="7">Mehr</option>
                  <option value="8">Aban</option>
                  <option value="9">Azar</option>
                  <option value="10">Dey</option>
                  <option value="11">Bahman</option>
                  <option value="12">Esfand</option>
                </select>
                <input
                  aria-label="Persian day"
                  id="persian-day"
                  max="31"
                  min="1"
                  name="day"
                  style="width: 4.25em"
                  type="number"
                  value=""
                /><br /><input
                  aria-label="Normal or leap year"
                  name="leap"
                  readonly="readonly"
                  style="margin-top: 0.25em; color: #228b22; width: 8.9em"
                  type="text"
                  value=""
                />
                <input
                  aria-label="Persian weekday"
                  name="wday"
                  readonly="readonly"
                  style="color: #228b22; width: 10.2em"
                  type="text"
                  value=""
                />
              </td>
            </tr>
            <tr>
              <td>
                <input
                  class="btn btn-primary"
                  id="pers-btn"
                  onclick="calcPersiana();"
                  type="submit"
                  value="Calculate"
                />
              </td>
            </tr>
          </table>
        </form>
        <div class="card border-info mb-3" style="max-width: 36rem">
          <div class="card-body text-info">
            <p class="card-text" id="animal-answer">
              In the Persianate adaptation of the Chinese-Uighur animal
              calendar, this date falls in a year of the …
            </p>
          </div>
        </div>
      </div>
      <h5>For the following date in the Islamic calendar…</h5>
      <div class="form-group">
        <label for="new-select-month">Month</label>
        <select class="form-control" id="new-select-month" style="width: 10rem">
          <option value="1">Muharram</option>
          <option value="2">Safar</option>
          <option value="3">Rabi‘ I</option>
          <option value="4">Rabi‘ II</option>
          <option value="5">Jumada I</option>
          <option value="6">Jumada II</option>
          <option value="7">Rajab</option>
          <option value="8">Sha‘ban</option>
          <option value="9">Ramadan</option>
          <option value="10">Shawwal</option>
          <option value="11">Dhu al-Qa‘dah</option>
          <option value="12">Dhu al-Hijjah</option>
        </select>
      </div>
      <div class="form-group">
        <label for="new-select-day">Day</label>
        <input
          type="number"
          class="form-control"
          id="new-select-day"
          max="30"
          min="1"
          value="1"
          style="width: 5rem"
        />
      </div>
      <h5>In the following <em>inclusive</em> range of years (AH)…</h5>
      <div class="form-group">
        <label for="new-select-start-year">Start year</label>
        <input
          type="number"
          class="form-control"
          id="new-select-start-year"
          max="1400"
          min="100"
          value=""
          style="width: 6rem"
        />
      </div>
      <div class="form-group">
        <label for="new-select-end-year">End year</label>
        <input
          type="number"
          class="form-control"
          id="new-select-end-year"
          max="1400"
          min="100"
          value=""
          style="width: 6rem"
        />
      </div>
      <h5>
        Return the years in which that date is calculated as occurring on the
        following day of the week…
      </h5>
      <div class="form-group">
        <label for="new-select-weekday">Weekday</label>
        <select
          class="form-control"
          id="new-select-weekday"
          style="width: 10rem"
        >
          <option>Saturday</option>
          <option>Sunday</option>
          <option>Monday</option>
          <option>Tuesday</option>
          <option>Wednesday</option>
          <option>Thursday</option>
          <option>Friday</option>
        </select>
      </div>
      <button type="button" class="btn btn-primary mb-3" id="new-submit-button">
        Submit
      </button>
      <div class="card border-success mb-3" style="max-width: 18rem">
        <div class="card-body text-success">
          <h5 class="card-title">Results</h5>
          <p class="card-text" id="new-results-text">…</p>
        </div>
      </div>
    </div>
    <script src="js/jquery-3.5.1.slim.min.js"></script>
    <script src="js/popper.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/calendar.min.js"></script>
    <script>
      // Set current date on page load
      setDateToToday();

      // Not sure what this does
      if ("" === location.search) {
        calcGregorian();
      } else {
        presetDataToRequest(location.search.substring(1));
      }
    </script>
    <script src="js/extras.js"></script>
    <script>
      document
        .getElementById("greg-calc-btn")
        .addEventListener("click", extras);
      document
        .getElementById("greg-today-btn")
        .addEventListener("click", extras);
      document.getElementById("julian-btn").addEventListener("click", extras);
      document.getElementById("hebrew-btn").addEventListener("click", extras);
      document.getElementById("islamic-btn").addEventListener("click", extras);
      document.getElementById("pers-btn").addEventListener("click", extras);
    </script>
    <script>
      const newMonthField = document.getElementById("new-select-month");
      const newDayField = document.getElementById("new-select-day");
      const newStartYearField = document.getElementById(
        "new-select-start-year"
      );
      const newEndYearField = document.getElementById("new-select-end-year");
      const newWeekdayField = document.getElementById("new-select-weekday");
      const newSubmitButton = document.getElementById("new-submit-button");
      const newResultsTextField = document.getElementById("new-results-text");

      function experimentalSearch() {
        const submittedMonthIndex = newMonthField.selectedIndex;
        const submittedDay = newDayField.value;
        const submittedStartYear = newStartYearField.value;
        const submittedEndYear = newEndYearField.value;
        const submittedWeekday = newWeekdayField.value;

        let resultsList = [];

        document.islamic.month.selectedIndex = submittedMonthIndex;
        document.islamic.day.value = submittedDay;

        for (i = submittedStartYear; i <= submittedEndYear; i++) {
          document.islamic.year.value = i;

          calcIslamic();

          if (
            document.islamic.month.selectedIndex === submittedMonthIndex &&
            document.islamic.day.value === submittedDay
          ) {
            if (document.gregorian.wday.value === submittedWeekday) {
              resultsList.push(i);
            }
          }
        }

        newResultsTextField.innerText = resultsList.join(", ");
      }

      newSubmitButton.addEventListener("click", experimentalSearch);
    </script>
  </body>
</html>
